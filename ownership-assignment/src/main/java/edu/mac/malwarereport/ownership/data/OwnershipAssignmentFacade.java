/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template
 */
package edu.mac.malwarereport.ownership.data;

import edu.mac.malwarereport.personnel.entity.OwnershipAssignment;
import jakarta.ejb.Stateless;
import jakarta.persistence.EntityManager;
import jakarta.persistence.PersistenceContext;
import java.util.List;

/**
 *
 * @author tohyu
 */
@Stateless
public class OwnershipAssignmentFacade extends AbstractFacade<OwnershipAssignment> {
     @PersistenceContext(unitName = "ownershipAssignmentPU")
    private EntityManager em;
    
    @Override
    protected EntityManager getEntityManager(){
        return em;
    }
    
    public OwnershipAssignmentFacade(){
        super(OwnershipAssignment.class);
    }
    
    public OwnershipAssignment getOwnershipAssignment(OwnershipAssignment ownershipAssignment){
        long primaryId = ownershipAssignment.getPrimaryId();
        String primaryType = ownershipAssignment.getPrimaryType();
        long secondaryId = ownershipAssignment.getSecondaryId();
        String secondaryType = ownershipAssignment.getSecondaryType();
        return getEntityManager().createNamedQuery("OwnershipAssignment.byAll", OwnershipAssignment.class)
                .setParameter("primaryId", primaryId)
                .setParameter("primaryType", primaryType)
                .setParameter("secondaryId", secondaryId)
                .setParameter("secondaryType", secondaryType)
                .getSingleResult();
    }
    
    public boolean mappingExist(OwnershipAssignment ownershipAssignment){
        long primaryId = ownershipAssignment.getPrimaryId();
        String primaryType = ownershipAssignment.getPrimaryType();
        long secondaryId = ownershipAssignment.getSecondaryId();
        String secondaryType = ownershipAssignment.getSecondaryType();
        
        return !getEntityManager().createNamedQuery("OwnershipAssignment.byAll", OwnershipAssignment.class)
                .setParameter("primaryId", primaryId)
                .setParameter("primaryType", primaryType)
                .setParameter("secondaryId", secondaryId)
                .setParameter("secondaryType", secondaryType)
                .getResultList().isEmpty();
    }
    
    public OwnershipAssignment getMappingByPrimaryId(OwnershipAssignment ownershipAssignment){
        long primaryId = ownershipAssignment.getPrimaryId();
        String primaryType = ownershipAssignment.getPrimaryType();
        String secondaryType = ownershipAssignment.getSecondaryType();
        return getEntityManager().createNamedQuery("OwnershipAssignment.byPrimaryId", OwnershipAssignment.class)
                .setParameter("primaryId", primaryId)
                .setParameter("primaryType", primaryType)
                .setParameter("secondaryType", secondaryType)
                .getSingleResult();
    }
    
    public OwnershipAssignment getMappingBySecondaryId(OwnershipAssignment ownershipAssignment){
        String primaryType = ownershipAssignment.getPrimaryType();
        long secondaryId = ownershipAssignment.getSecondaryId();
        String secondaryType = ownershipAssignment.getSecondaryType();
        
        return getEntityManager().createNamedQuery("OwnershipAssignment.bySecondaryId", OwnershipAssignment.class)
                .setParameter("secondaryId", secondaryId)
                .setParameter("secondaryType", secondaryType)
                .setParameter("primaryType", primaryType)
                .getSingleResult();
    }
    
    public List<OwnershipAssignment> getAllMappingByPrimaryId(OwnershipAssignment ownershipAssignment){
        long primaryId = ownershipAssignment.getPrimaryId();
        String primaryType = ownershipAssignment.getPrimaryType();
        String secondaryType = ownershipAssignment.getSecondaryType();
        return getEntityManager().createNamedQuery("OwnershipAssignment.byPrimaryId", OwnershipAssignment.class)
                .setParameter("primaryId", primaryId)
                .setParameter("primaryType", primaryType)
                .setParameter("secondaryType", secondaryType)
                .getResultList();
    }
    
    public List<OwnershipAssignment> getAllMappingByPrimaryOnly(OwnershipAssignment ownershipAssignment){
        long primaryId = ownershipAssignment.getPrimaryId();
        String primaryType = ownershipAssignment.getPrimaryType();
        return getEntityManager().createNamedQuery("OwnershipAssignment.byPrimaryOnly", OwnershipAssignment.class)
                .setParameter("primaryId", primaryId)
                .setParameter("primaryType", primaryType)
                .getResultList();
    }
    
    public int countAllMappingByPrimaryId(OwnershipAssignment ownershipAssignment){
        long primaryId = ownershipAssignment.getPrimaryId();
        String primaryType = ownershipAssignment.getPrimaryType();
        String secondaryType = ownershipAssignment.getSecondaryType();
        return getEntityManager().createNamedQuery("OwnershipAssignment.byPrimaryId", OwnershipAssignment.class)
                .setParameter("primaryId", primaryId)
                .setParameter("primaryType", primaryType)
                .setParameter("secondaryType", secondaryType)
                .getResultList().size();
    }
    
    public List<OwnershipAssignment> getAllMappingBySecondaryId(OwnershipAssignment ownershipAssignment){
        String primaryType = ownershipAssignment.getPrimaryType();
        long secondaryId = ownershipAssignment.getSecondaryId();
        String secondaryType = ownershipAssignment.getSecondaryType();
        
        return getEntityManager().createNamedQuery("OwnershipAssignment.bySecondaryId", OwnershipAssignment.class)
                .setParameter("secondaryId", secondaryId)
                .setParameter("secondaryType", secondaryType)
                .setParameter("primaryType", primaryType)
                .getResultList();
    }
    
    public int countAllMappingBySecondaryId(OwnershipAssignment ownershipAssignment){
        String primaryType = ownershipAssignment.getPrimaryType();
        long secondaryId = ownershipAssignment.getSecondaryId();
        String secondaryType = ownershipAssignment.getSecondaryType();
        
        return getEntityManager().createNamedQuery("OwnershipAssignment.bySecondaryId", OwnershipAssignment.class)
                .setParameter("secondaryId", secondaryId)
                .setParameter("secondaryType", secondaryType)
                .setParameter("primaryType", primaryType)
                .getResultList().size();
    }
    
}
