/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template
 */
package edu.mac.malwarereport.account.temp;

import edu.mac.malwarereport.account.authenticate.Authenticate;
import edu.mac.malwarereport.account.data.AccountFacade;
import edu.mac.malwarereport.account.data.EmailVerificationFacade;
import edu.mac.malwarereport.account.data.PasswordTokenFacade;
import edu.mac.malwarereport.account.entity.Account;
import edu.mac.malwarereport.account.entity.EmailVerification;
import edu.mac.malwarereport.account.entity.PasswordToken;
import edu.mac.malwarereport.account.manager.AccountManager;
import edu.mac.malwarereport.ownership.data.OwnershipAssignmentFacade;
import edu.mac.malwarereport.personnel.entity.OwnershipAssignment;
import edu.mac.malwarereport.personnel.manager.OwnershipAssignmentManager;
import jakarta.annotation.PostConstruct;
import jakarta.ejb.Singleton;
import jakarta.ejb.Startup;
import jakarta.inject.Inject;

/**
 *
 * @author E
 */

@Startup
@Singleton
public class InitializeData {
    
    @Inject
    private Authenticate authenticate;
    
    @Inject
    private AccountFacade accountFacade;
    
    @Inject
    private EmailVerificationFacade emailVerificationFacade;
    
    @Inject
    private AccountManager accountManager;
    
    @Inject
    private PasswordTokenFacade passwordTokenFacade;
    
    @Inject
    private OwnershipAssignmentFacade ownershipAssignmentFacade;
    
    @Inject 
    private OwnershipAssignmentManager ownershipAssignmentManager;
    
    @PostConstruct
    public void init(){
        
        if(accountFacade.count() <= 0){
        
        String password = authenticate.passwordHasher("Password0!");
//        AccountDTO accountDTO = new AccountDTO("eddy@gmail.com", "E", "Leon Eddy", password);
//        accountManager.register(accountDTO);
//        Account account = accountFacade.getAccount("eddy@gmail.com");
//        account.setFirstLogin(false);
//        account.setDelete(false);
//        account.setSecretKey2FA("QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
//        EmailVerification emailVerification = account.getEmailVerification();
//        emailVerification.setVerified(true);
//        account.setEmailVerification(emailVerification);
//        
//        
//        accountDTO = new AccountDTO("jasmine@gmail.com", "Jamine", "Ruby", password);
//        accountManager.register(accountDTO);
//        account = accountFacade.getAccount("jasmine@gmail.com");
//        account.setFirstLogin(false);
//        account.setDelete(false);
//        account.setSecretKey2FA("QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
//        emailVerification = account.getEmailVerification();
//        emailVerification.setVerified(true);
//        account.setEmailVerification(emailVerification);
//        
//        accountDTO = new AccountDTO("first@gmail.com", "Micheal", "Beak", password);
//        accountManager.register(accountDTO);
//        account = accountFacade.getAccount("first@gmail.com");
//        account.setFirstLogin(true);
//        account.setDelete(false);
//        account.setSecretKey2FA("QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
//        emailVerification = account.getEmailVerification();
//        emailVerification.setVerified(true);
//        account.setEmailVerification(emailVerification);
//        
//        accountDTO = new AccountDTO("tohyunzhen@gmail.com", "Yun", "Zhen", password);
//        accountManager.register(accountDTO);
//        account = accountFacade.getAccount("tohyunzhen@gmail.com");
//        account.setFirstLogin(false);
//        account.setDelete(false);
//        account.setSecretKey2FA("QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
//        emailVerification = account.getEmailVerification();
//        emailVerification.setVerified(true);
//        account.setEmailVerification(emailVerification);
//        
//        accountDTO = new AccountDTO("malwarelabcoregrouptest@gmail.com@gmail.com", "Mal", "Grp", password);
//        accountManager.register(accountDTO);
//        account = accountFacade.getAccount("malwarelabcoregrouptest@gmail.com");
//        account.setFirstLogin(false);
//        account.setDelete(false);
//        account.setSecretKey2FA("QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
//        emailVerification = account.getEmailVerification();
//        emailVerification.setVerified(false);
//        account.setEmailVerification(emailVerification);
        //normal user
        Account account = new Account("eddy@gmail.com", "E", "Leon Eddy", password, null, false, false, "QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
        EmailVerification emailVerfication = new EmailVerification("eddyToken");
        account.setEmailVerification(emailVerfication);
        accountFacade.create(account);
        System.out.print("Account id: "+account.getId());
        emailVerfication.setVerified(true);
        emailVerificationFacade.edit(emailVerfication);
        
//        OwnershipAssignment ownershipAssignment = new OwnershipAssignment("org", "acc");
//            ownershipAssignment.setPrimaryId(1); //temasek poly
//            ownershipAssignment.setSecondaryId(account.getId()); //Eddy
//            ownershipAssignmentFacade.create(ownershipAssignment);
        
        //normal user
        account = new Account("jasmine@gmail.com", "Jamine", "Ruby", password, null, false, false, "QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
        emailVerfication = new EmailVerification("jasmineToken");
        account.setEmailVerification(emailVerfication);
        accountFacade.create(account);
        emailVerfication.setVerified(true);
        emailVerificationFacade.edit(emailVerfication);
        
//        ownershipAssignment = new OwnershipAssignment("org", "acc");
//            ownershipAssignment.setPrimaryId(1); //temasek poly
//            ownershipAssignment.setSecondaryId(account.getId()); //jasmine
//            ownershipAssignmentFacade.create(ownershipAssignment);

        
        //firstLoginTest
        account = new Account("first@gmail.com", "Micheal", "Beak", password, null, true, false, "QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
        emailVerfication = new EmailVerification("firstToken");
        emailVerfication.setVerified(true);
        account.setEmailVerification(emailVerfication);
        accountFacade.create(account);
        emailVerfication.setVerified(true);
        emailVerificationFacade.edit(emailVerfication);
        
//        ownershipAssignment = new OwnershipAssignment("org", "acc");
//            ownershipAssignment.setPrimaryId(1); //temasek poly
//            ownershipAssignment.setSecondaryId(account.getId()); //first
//            ownershipAssignmentFacade.create(ownershipAssignment);


        
        //Verify email test
        account = new Account("tohyunzhen@gmail.com", "Yun", "Zhen", password, null, true, false, "QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
        emailVerfication = new EmailVerification("tohyunzhenToken");
        emailVerfication.setVerified(false);
        account.setEmailVerification(emailVerfication);
        accountFacade.create(account);
        
//        ownershipAssignment = new OwnershipAssignment("org", "acc");
//            ownershipAssignment.setPrimaryId(1); //temasek poly
//            ownershipAssignment.setSecondaryId(account.getId()); //yunzhen
//            ownershipAssignmentFacade.create(ownershipAssignment);

        
        account = new Account("leo@gmail.com", "Leo", "Jane", password, null, false, false, "QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
        emailVerfication = new EmailVerification("leoToken");
        account.setEmailVerification(emailVerfication);
        accountFacade.create(account);
        emailVerfication.setVerified(true);
        emailVerificationFacade.edit(emailVerfication);
        
//        //Leo malware analysis operation ORGANISATION
//            ownershipAssignment = new OwnershipAssignment("org", "acc");
//            ownershipAssignment.setPrimaryId(2); //leo operation
//            ownershipAssignment.setSecondaryId(account.getId()); //leo
//            ownershipAssignmentFacade.create(ownershipAssignment);
            
        
        account = new Account("leosbuddy@gmail.com", "Leo", "Buddy", password, null, false, false, "QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
        emailVerfication = new EmailVerification("leoBuddyToken");
        account.setEmailVerification(emailVerfication);
        accountFacade.create(account);
        emailVerfication.setVerified(true);
        emailVerificationFacade.edit(emailVerfication);
        
//        ownershipAssignment = new OwnershipAssignment("org", "acc");
//            ownershipAssignment.setPrimaryId(2); //leo operation
//            ownershipAssignment.setSecondaryId(account.getId()); //leobuddy
//            ownershipAssignmentFacade.create(ownershipAssignment);

        
        account = new Account("leofriend@gmail.com", "Leo", "Friend", password, null, false, false, "QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
        emailVerfication = new EmailVerification("leofriendToken");
        account.setEmailVerification(emailVerfication);
        accountFacade.create(account);
        emailVerfication.setVerified(true);
        emailVerificationFacade.edit(emailVerfication);
        
//        ownershipAssignment = new OwnershipAssignment("org", "acc");
//            ownershipAssignment.setPrimaryId(2); //leo operation
//            ownershipAssignment.setSecondaryId(account.getId()); //leofriend
//            ownershipAssignmentFacade.create(ownershipAssignment);
            
        
        //Verify email test
        account = new Account("malwarelabcoregrouptest@gmail.com", "No", "Verify", password, null, true, false, "QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
        emailVerfication = new EmailVerification("verifyToken");
        account.setEmailVerification(emailVerfication);
        accountFacade.create(account);
        
//        //Testing ORGANISATION
//            ownershipAssignment = new OwnershipAssignment("org", "acc");
//            ownershipAssignment.setPrimaryId(3); //testing
//            ownershipAssignment.setSecondaryId(account.getId()); //malware lab core group
//            ownershipAssignmentFacade.create(ownershipAssignment);
            
        
        //Password Reset token test
        account = new Account("token@gmail.com", "No", "Verify", password, null, true, false, "QDWSM3OYBPGTEVSPB5FKVDM3CSNCWHVK");
        emailVerfication = new EmailVerification("tokenToken");
        account.setEmailVerification(emailVerfication);
        emailVerfication.setVerified(true);
        PasswordToken passwordToken = new PasswordToken("token");
        account.setPasswordToken(passwordToken);
        accountFacade.create(account);
        emailVerfication.setVerified(true);
        emailVerificationFacade.edit(emailVerfication);
        
//        ownershipAssignment = new OwnershipAssignment("org", "acc");
//            ownershipAssignment.setPrimaryId(3); //testing
//            ownershipAssignment.setSecondaryId(account.getId()); //token
//            ownershipAssignmentFacade.create(ownershipAssignment);
           
        
        }

    }
    
}
