/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template
 */
package edu.mac.malwarereport.account.manager;

import edu.mac.malwarereport.account.authenticate.Authenticate;
import edu.mac.malwarereport.account.data.AccountFacade;
import edu.mac.malwarereport.account.dto.AccountDTO;
import edu.mac.malwarereport.account.entity.Account;
import jakarta.ejb.Stateless;
import jakarta.inject.Inject;
import java.util.ArrayList;
import java.util.List;

/**
 *
 * @author Jaibun Thana
 */
@Stateless
public class ReadAccountManager {
    
    @Inject
    private AccountFacade accountFacade;
    
    @Inject
    private Authenticate auth;
    
    
    public AccountDTO getAccount(String email) {
        Account account = accountFacade.getAccount(email);
        return account.toDTO();
    }

    public AccountDTO getCurrentAccount() {
        Account account = accountFacade.getAccount(auth.getCurrentUser());
        return account.toDTO();
    }

    //find individual account 
    public AccountDTO findbyID(long id) {
        Account account = accountFacade.find(id);
        return account.toDTO();
    }
    
    public AccountDTO findBySuuid(AccountDTO accountDTO){
        String suuid = accountDTO.getSuuid();
        Account account = accountFacade.getAccountBySuuid(suuid);
        return account.toDTO();
    }

    //find all the accounts
    public List<AccountDTO> findAll() {
        List<Account> accountList = accountFacade.findAll();
        List<AccountDTO> accountDTOList = new ArrayList<>();
        for (int i = 0; i < accountList.size(); i++) {
            AccountDTO tempAccount = accountList.get(i).toDTO();
            accountDTOList.add(tempAccount);
        }
        return accountDTOList;
    }
    
}
