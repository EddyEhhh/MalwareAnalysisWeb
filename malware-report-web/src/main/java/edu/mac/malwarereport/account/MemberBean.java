/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template
 */
package edu.mac.malwarereport.account;

import edu.mac.malwarereport.account.applicationFacade.ReadAccountApplicationFacade;
import edu.mac.malwarereport.account.applicationFacade.SubjectRoleApplicationFacade;
import edu.mac.malwarereport.account.dto.AccountDTO;
import edu.mac.malwarereport.role.dto.RoleDTO;
import jakarta.annotation.PostConstruct;
import jakarta.enterprise.context.RequestScoped;
import jakarta.faces.context.FacesContext;
import jakarta.inject.Inject;
import jakarta.inject.Named;
import jakarta.servlet.http.HttpServletRequest;
import java.util.List;

/**
 *
 * @author tohyu
 */
@Named("member")
@RequestScoped
public class MemberBean {
    
    //select specific mmember account
    private AccountDTO selectedAccount;
    
    private List<RoleDTO> selectedAccountRole;
    
    @Inject
    private ReadAccountApplicationFacade readAccountApplicationFacade;
    
    @Inject
    private SubjectRoleApplicationFacade subjectRoleApplicationFacade;
    
    @PostConstruct
    public void init(){
        HttpServletRequest req = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
        //this is to request the 'id' which is the variable at the end on the url 
        String id = (req.getParameter("id"));
        //find the report by the 'id'
        AccountDTO accountDTO = new AccountDTO();
        accountDTO.setSuuid(id);
        selectedAccount = readAccountApplicationFacade.findBySuuid(accountDTO);
        selectedAccountRole = subjectRoleApplicationFacade.getAllRoleByAccount(selectedAccount);
        
        
    }
    
    /**
     * @return the selectedAccount
     */
    public AccountDTO getSelectedAccount() {
        return selectedAccount;
    }

    /**
     * @param selectedAccount the selectedAccount to set
     */
    public void setSelectedAccount(AccountDTO selectedAccount) {
        this.selectedAccount = selectedAccount;
    }

    /**
     * @return the selectedAccountRole
     */
    public List<RoleDTO> getSelectedAccountRole() {
        return selectedAccountRole;
    }

    /**
     * @param selectedAccountRole the selectedAccountRole to set
     */
    public void setSelectedAccountRole(List<RoleDTO> selectedAccountRole) {
        this.selectedAccountRole = selectedAccountRole;
    }
    
}
