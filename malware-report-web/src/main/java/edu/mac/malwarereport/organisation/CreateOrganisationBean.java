/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template
 */
package edu.mac.malwarereport.organisation;

import edu.mac.malwarereport.organisation.applicationFacade.OrganisationApplicationFacade;
import edu.mac.malwarereport.organisation.dto.OrganisationDTO;
import jakarta.enterprise.context.RequestScoped;
import jakarta.faces.application.FacesMessage;
import jakarta.faces.context.ExternalContext;
import jakarta.faces.context.FacesContext;
import jakarta.inject.Inject;
import jakarta.inject.Named;
import jakarta.servlet.http.HttpServletRequest;
import java.io.IOException;

/**
 *
 * @author tohyu
 */
@RequestScoped
@Named("createOrganisation")
public class CreateOrganisationBean {
    
    @Inject
    private OrganisationApplicationFacade organisationApplicationFacade;
    
    private OrganisationDTO organisationDTO = new OrganisationDTO();
    
    private ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();

    private HttpServletRequest req = (HttpServletRequest)externalContext.getRequest();
    
    private boolean test;
    
    public boolean test(){
        return false;
    }
    
    public void createOrganisation()throws IOException{
        switch(organisationApplicationFacade.createOrganisation(getOrganisationDTO())){
            case SUCCESS:
                externalContext.redirect(externalContext.getRequestContextPath() + "/page/admin/organisation.xhtml");
                FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Organisation Created", null));
                break;
            case ERROR:
            default:
                FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Oops something went wrong", null));
                break;
        }
        
    }
    
        /**
     * @return the organisationDTO
     */
    public OrganisationDTO getOrganisationDTO() {
        return organisationDTO;
    }

    /**
     * @param organisationDTO the organisationDTO to set
     */
    public void setOrganisationDTO(OrganisationDTO organisationDTO) {
        this.organisationDTO = organisationDTO;
    }

    /**
     * @return the test
     */
    public boolean isTest() {
        return test;
    }

    /**
     * @param test the test to set
     */
    public void setTest(boolean test) {
        this.test = test;
    }

    
    
}
