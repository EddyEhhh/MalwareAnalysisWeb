<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xml:lang="en">

    <ui:composition template="/template/user_default.xhtml">
        <ui:define name="pageTitle">#{msg["header.viewRole"]}</ui:define>
        <ui:define name="body">

            <h:body class="relative">
                <h:form class="absolute px-4 pt-3 w-full">
                    <h4 style="margin-top:10px">#{msg['role.view']}</h4>
                    <div class="flex flex-column">
                        <div class="grid">
                            <div class="col-6">
                                <p:outputLabel class="font-bold">#{msg['role.name']} </p:outputLabel><br/>
                                <h:outputText class="w-full mt-2 mb-2" value="#{rolebeans.selectedRole.name}"/>                            
                            </div>
                            <div class="col-12">
                                <p:outputLabel class="font-bold">#{msg['role.description']}</p:outputLabel><br/>
                                <h:outputText class="w-full mt-2 mb-2" value="#{rolebeans.selectedRole.description}"/>                            
                            </div>
                            <div class="col-6">
                                <p:outputLabel class="font-bold">#{msg['role.user']} </p:outputLabel><br/>
                                <p:repeat value="#{rolebeans.users}" var="thisUser" varStatus="thisUserStatus" >
                                    <h:outputText value="#{thisUserStatus.index==0 ? null : '|' }" />
                                    <p:link title="View user" value="#{thisUser.email}" outcome="/page/organisation/manager/memberDetail.xhtml/">
                                        <f:param name="id" value="#{thisUser.suuid}"/>
                                    </p:link>
                                </p:repeat>                            
                            </div>
                            
                            <div class="col-12">
                                <p:outputLabel class="font-bold">#{msg["role.inheritedBy"]} </p:outputLabel><br/>
                                <p:repeat value="#{rolebeans.inheritedBy}" var="thisParent">
                                    <i class="pi pi-circle-on" style="font-size: xx-small"></i>
                                    <p:link title="View Role" class="pr-4" value="#{thisParent.name}" outcome="/page/organisation/manager/roleDetail.xhtml/">
                                        <f:param name="id" value="#{thisParent.suuid}"/>
                                    </p:link> 
                                </p:repeat>
                            </div>
<!--                            <div class="col-6">
                                <p:outputLabel class="font-bold">#{msg["role.indirectInheritedBy"]} </p:outputLabel><br/>
                                <p:repeat value="#{rolebeans.indirectInheritBy}" var="thisParent">
                                    <i class="pi pi-circle-on" style="font-size: xx-small"></i>
                                    <p:link title="View Role" class="pr-4" value="#{thisParent.name}" outcome="/page/organisation/manager/roleDetail.xhtml/">
                                        <f:param name="id" value="#{thisParent.suuid}"/>
                                    </p:link> 
                                </p:repeat>
                            </div>-->
                            <div class="col-6">
                                <p:outputLabel class="font-bold">#{msg["role.directInheritance"]} </p:outputLabel><br/>
                                <p:repeat value="#{rolebeans.selectedRole.children}" var="thisChild">
                                    <i class="pi pi-circle-on" style="font-size: xx-small"></i>
                                    <p:link title="View Role" class="pr-4" value="#{thisChild.name}" outcome="/page/organisation/manager/roleDetail.xhtml/">
                                        <f:param name="id" value="#{thisChild.suuid}"/>
                                    </p:link> 
                                </p:repeat>
                            </div>
                            <div class="col-6">
                                <p:outputLabel class="font-bold">#{msg['role.indirectInheritance']} </p:outputLabel><br/>
                                <p:repeat class="w-full mt-2 mb-2" value="#{rolebeans.indirectInheritance}" var="thisChild">
                                    <i class="pi pi-circle-on" style="font-size: xx-small"></i>
                                    <p:link title="View Role" class="pr-4" value="#{thisChild.name}" outcome="/page/organisation/manager/roleDetail.xhtml/">
                                        <f:param name="id" value="#{thisChild.suuid}"/>
                                    </p:link>
                                </p:repeat>
                            </div>
                            <p:divider/>
                            <div class="col-6">
                                <p:outputLabel class="font-bold">#{msg['role.permission']} </p:outputLabel><br/>
                                <p:repeat value="#{rolebeans.currentPermission}" var="thisPermission">
                                    <h:outputText value="#{thisPermission.name}"/><br/>
                                </p:repeat>
                            </div>
                            
                            <div class="col-12">
                            <p:commandButton rendered="#{uIPermission.editRole}" action="#{redirectBean.editRole()}" value="#{msg['role.editRole']}" class="ui-button-raised ui-button-info">
                                <f:param name="id" value="#{rolebeans.selectedRole.suuid}"/>
                            </p:commandButton>
                            <p:commandButton action="#{redirectBean.organisationRole()}" value="#{msg['general.goBack']}" class="mx-2 ui-button-raised ui-button-secondary"/>
                        </div>
                        </div>            
   
                    
                    </div>
                </h:form>

            </h:body>
        </ui:define>
    </ui:composition>
</html>
